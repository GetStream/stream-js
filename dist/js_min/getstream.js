!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.stream=e():t.stream=e()}(window,function(){return r={},i.m=n=[function(t,e,n){t.exports=n(71)},function(t,e,n){"use strict";var r=n(2),s=n.n(r),i=n(31),o=n.n(i),a=n(15),c=n.n(a),u=n(57),l=n.n(u),h=n(25),f=n.n(h),p=n(58),d=n.n(p);function v(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,n=f()(r);return e=i?(t=f()(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments),l()(this,e)}}var g="function"==typeof Error.captureStackTrace,y=!!(new Error).stack,m=function(t){c()(r,t);var n=v(r);function r(t){var e;return s()(this,r),(e=n.call(this,t)).message=t,g?Error.captureStackTrace(o()(e),constructor):e.stack=y?(new Error).stack:"",e}return r}(d()(Error)),_=function(t){c()(n,t);var e=v(n);function n(){return s()(this,n),e.apply(this,arguments)}return n}(m),b=function(t){c()(n,t);var e=v(n);function n(){return s()(this,n),e.apply(this,arguments)}return n}(m),w=function(t){c()(n,t);var e=v(n);function n(){return s()(this,n),e.apply(this,arguments)}return n}(m),k=function(t){c()(o,t);var i=v(o);function o(t,e,n){var r;return s()(this,o),(r=i.call(this,t)).error=e,r.response=n,r}return o}(m);e.a={FeedError:_,SiteError:b,MissingSchemaError:w,StreamApiError:k}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";var r=n(4),i=n.n(r),o=n(14),s=n.n(o),a=n(33),c=n.n(a),u=n(66),l=n.n(u);function h(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){i()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function d(t){return function(t){var e=t.length%4;if(!e)return t;for(var n=4-e;n--;)t+="=";return t}(t).replace(/\-/g,"+").replace(/_/g,"/")}function v(t){return function(t){if("object"===s()(t))return t;try{return JSON.parse(t)}catch(t){return}}(function(t){try{return l.a.atob(d(t))}catch(t){if("InvalidCharacterError"===t.name)return;throw t}}(t.split(".",1)[0]))}function g(t){if(null==t||0===t.length)return!1;var e=t.split(" ")[1]||t;return p.test(e)&&!!v(e)}e.a={JWTScopeToken:function(t,e,n,r){var i=r||{},o=!i.expireTokens||!i.expireTokens,s={resource:e,action:n};return i.feedId&&(s.feed_id=i.feedId),i.userId&&(s.user_id=i.userId),c.a.sign(s,t,{algorithm:"HS256",noTimestamp:o})},headerFromJWS:v,JWTUserSessionToken:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if("string"!=typeof e)throw new TypeError("userId should be a string");var i=f({user_id:e},n),o=f({algorithm:"HS256",noTimestamp:!0},r);return c.a.sign(i,t,o)},isJWTSignature:g,isJWT:g}},function(t,e){function c(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}t.exports=function(a){return function(){var t=this,s=arguments;return new Promise(function(e,n){var r=a.apply(t,s);function i(t){c(r,e,n,i,o,"next",t)}function o(t){c(r,e,n,i,o,"throw",t)}i(void 0)})}}},function(t,e,n){"use strict";var r=n(60),o=n.n(r),i=n(14),s=n.n(i),a=n(61),c=n.n(a),u=n(1),l=/^[\w]+$/,h=/^[\w-]+$/;function f(t){if(!l.test(t))throw new u.a.FeedError("Invalid feedSlug, please use letters, numbers or _: ".concat(t));return t}function p(t){if(!h.test(t))throw new u.a.FeedError("Invalid userId, please use letters, numbers, - or _: ".concat(t));return t}function d(t){return t&&"object"===s()(t)&&"function"==typeof t._read&&"object"===s()(t._readableState)}e.a={validateFeedId:function(t){var e=t.split(":");if(2!==e.length)throw new u.a.FeedError("Invalid feedId, expected something like user:1 got ".concat(t));var n=o()(e,2),r=n[0],i=n[1];return f(r),p(i),t},validateFeedSlug:f,validateUserId:p,rfc3986:function(t){return t.replace(/[!'()*]/g,function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())})},isReadableStream:d,addFileToFormData:function(t,e,n){var r,i=new c.a;return d(t)||t&&t.toString&&"[object File]"===t.toString()?r=t:(r={uri:t,name:e||t.split("/").reverse()[0]},null!=n&&(r.type=n)),i.append("file",r),i},replaceStreamObjects:function e(n){if(Array.isArray(n))return n.map(e);if("[object Object]"!==Object.prototype.toString.call(n))return n;if("function"==typeof n.ref)return n.ref();var r={};return Object.keys(n).forEach(function(t){r[t]=e(n[t])}),r}}},function(t,e,n){"use strict";var i=Array.prototype.forEach,o=Object.prototype.hasOwnProperty;t.exports=function(r){return i.call(arguments,function(t,e){if(0!==e)for(var n in t)o.call(t,n)&&(r[n]=t[n])}),r}},function(t,e,n){"use strict";var i=n(34),r=Object.prototype.toString;function o(t){return"[object Array]"===r.call(t)}function s(t){return void 0===t}function a(t){return null!==t&&"object"==typeof t}function c(t){return"[object Function]"===r.call(t)}function u(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),o(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===r.call(t)},isBuffer:function(t){return null!==t&&!s(t)&&null!==t.constructor&&!s(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){var e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer;return e},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:s,isDate:function(t){return"[object Date]"===r.call(t)},isFile:function(t){return"[object File]"===r.call(t)},isBlob:function(t){return"[object Blob]"===r.call(t)},isFunction:c,isStream:function(t){return a(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function n(){var r={};function t(t,e){"object"==typeof r[e]&&"object"==typeof t?r[e]=n(r[e],t):r[e]=t}for(var e=0,i=arguments.length;e<i;e++)u(arguments[e],t);return r},deepMerge:function n(){var r={};function t(t,e){"object"==typeof r[e]&&"object"==typeof t?r[e]=n(r[e],t):r[e]="object"==typeof t?n({},t):t}for(var e=0,i=arguments.length;e<i;e++)u(arguments[e],t);return r},extend:function(n,t,r){return u(t,function(t,e){n[e]=r&&"function"==typeof t?i(t,r):t}),n},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,n){"use strict";var i=n(8);t.exports=function(t,e){"function"!=typeof t&&(e=t,t=Object);function n(){return this.initialize&&this.initialize.apply(this,arguments)||this}function r(){}return r.prototype=t.prototype,n.prototype=new r,i(n.prototype,e),n}},function(t,e){var n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports={isURI:function(t){return t&&t.protocol&&t.host&&t.path},isSameOrigin:function(t){return t.protocol===location.protocol&&t.hostname===location.hostname&&t.port===location.port},parse:function(n){if("string"!=typeof n)return n;function t(e,t){n=n.replace(t,function(t){return c[e]=t,""}),c[e]=c[e]||""}var e,r,i,o,s,a,c={};for(t("protocol",/^[a-z]+\:/i),t("host",/^\/\/[^\/\?#]+/),/^\//.test(n)||c.host||(n=location.pathname.replace(/[^\/]*$/,"")+n),t("pathname",/^[^\?#]*/),t("search",/^\?[^#]*/),t("hash",/^#.*/),c.protocol=c.protocol||location.protocol,c.host?(c.host=c.host.substr(2),/@/.test(c.host)&&(c.auth=c.host.split("@")[0],c.host=c.host.split("@")[1]),e=c.host.match(/^\[([^\]]+)\]|^[^:]+/),c.hostname=e[1]||e[0],c.port=(c.host.match(/:(\d+)$/)||[])[1]||""):(c.host=location.host,c.hostname=location.hostname,c.port=location.port),c.pathname=c.pathname||"/",c.path=c.pathname+c.search,a={},o=0,s=(i=(r=c.search.replace(/^\?/,""))?r.split("&"):[]).length;o<s;o++)e=i[o].split("="),a[decodeURIComponent(e[0]||"")]=decodeURIComponent(e[1]||"");return c.query=a,c.href=this.stringify(c),c},stringify:function(t){var e=t.auth?t.auth+"@":"",n=t.protocol+"//"+e+t.host;return n+=t.pathname+this.queryString(t.query)+(t.hash||"")},queryString:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return 0===e.length?"":"?"+e.join("&")}}},function(u,t,h){"use strict";(function(s){var t=h(10),a=h(46).Cookie,n=h(23),l=h(26),r=h(8),e=h(16),i=h(94),o=h(44),c=r(t({className:"Transport",DEFAULT_PORTS:{"http:":80,"https:":443,"ws:":80,"wss:":443},MAX_DELAY:0,batching:!0,initialize:function(t,e){this._dispatcher=t,this.endpoint=e,this._outbox=[],this._proxy=r({},this._dispatcher.proxy),this._proxy.origin||(this._proxy.origin=this._findProxy())},close:function(){},encode:function(t){return""},sendMessage:function(t){return this.debug("Client ? sending message to ?: ?",this._dispatcher.clientId,this.endpoint.href,t),this.batching?(this._outbox.push(t),this._flushLargeBatch(),t.channel===o.HANDSHAKE?this._publish(.01):(t.channel===o.CONNECT&&(this._connectMessage=t),this._publish(this.MAX_DELAY))):n.resolve(this.request([t]))},_makePromise:function(){var e=this;this._requestPromise=this._requestPromise||new n(function(t){e._resolvePromise=t})},_publish:function(t){return this._makePromise(),this.addTimeout("publish",t,function(){this._flush(),delete this._requestPromise},this),this._requestPromise},_flush:function(){this.removeTimeout("publish"),1<this._outbox.length&&this._connectMessage&&(this._connectMessage.advice={timeout:0}),this._resolvePromise(this.request(this._outbox)),this._connectMessage=null,this._outbox=[]},_flushLargeBatch:function(){var t;this.encode(this._outbox).length<this._dispatcher.maxRequestSize||(t=this._outbox.pop(),this._makePromise(),this._flush(),t&&this._outbox.push(t))},_receive:function(t){if(t){t=[].concat(t),this.debug("Client ? received from ? via ?: ?",this._dispatcher.clientId,this.endpoint.href,this.connectionType,t);for(var e=0,n=t.length;e<n;e++)this._dispatcher.handleResponse(t[e])}},_handleError:function(t,e){t=[].concat(t),this.debug("Client ? failed to send to ? via ?: ?",this._dispatcher.clientId,this.endpoint.href,this.connectionType,t);for(var n=0,r=t.length;n<r;n++)this._dispatcher.handleError(t[n])},_getCookies:function(){var t=this._dispatcher.cookies,e=this.endpoint.href;return t?l.map(t.getCookiesSync(e),function(t){return t.cookieString()}).join("; "):""},_storeCookies:function(t){var e,n=this._dispatcher.cookies,r=this.endpoint.href;if(t&&n)for(var i=0,o=(t=[].concat(t)).length;i<o;i++)e=a.parse(t[i]),n.setCookieSync(e,r)},_findProxy:function(){if(void 0!==s){var t=this.endpoint.protocol;if(t){var e,n,r=t.replace(/:$/,"").toLowerCase()+"_proxy",i=r.toUpperCase(),o=s.env;return"http_proxy"===r&&o.REQUEST_METHOD?(1===(e=Object.keys(o).filter(function(t){return/^http_proxy$/i.test(t)})).length?e[0]===r&&void 0===o[i]&&(n=o[r]):1<e.length&&(n=o[r]),n=n||o["CGI_"+i]):(n=o[r]||o[i])&&!o[r]&&console.warn("The environment variable "+i+" is discouraged. Use "+r+"."),n}}}}),{get:function(o,s,a,c,u){var t=o.endpoint;l.asyncEach(this._transports,function(t,n){var e=t[0],r=t[1],i=o.endpointFor(e);return 0<=l.indexOf(a,e)?n():l.indexOf(s,e)<0?(r.isUsable(o,i,function(){}),n()):void r.isUsable(o,i,function(t){if(!t)return n();var e=r.hasOwnProperty("create")?r.create(o,i):new r(o,i);c.call(u,e)})},function(){throw new Error("Could not find a usable connection type for "+t.href)})},register:function(t,e){this._transports.push([t,e]),e.prototype.connectionType=t},getConnectionTypes:function(){return l.map(this._transports,function(t){return t[0]})},disable:function(t){if("autodisconnect"===t)for(var e=0;e<this._transports.length;e++)this._transports[e][1]._unloaded=!1},_transports:[]});r(c.prototype,e),r(c.prototype,i),u.exports=c}).call(this,h(22))},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(t){return typeof t}:e.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}e.exports=n},function(t,e,n){var r=n(30);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){"use strict";var a=n(17),c={LOG_LEVELS:{fatal:4,error:3,warn:2,info:1,debug:0},writeLog:function(t,e){var n,r,i,o,s=c.logger||(c.wrapper||c).logger;s&&(n=Array.prototype.slice.apply(t),r="[Faye",i=this.className,o=n.shift().replace(/\?/g,function(){try{return a(n.shift())}catch(t){return"[Object]"}}),i&&(r+="."+i),r+="] ","function"==typeof s[e]?s[e](r+o):"function"==typeof s&&s(r+o))}};for(var r in c.LOG_LEVELS)!function(t){c[t]=function(){this.writeLog(arguments,t)}}(r);t.exports=c},function(t,e,n){"use strict";t.exports=function(t){return JSON.stringify(t,function(t,e){return this[t]instanceof Array?this[t]:e})}},function(t,e,n){"use strict";(function(r){var i=n(23);t.exports={then:function(t,e){var n=this;return this._promise||(this._promise=new i(function(t,e){n._resolve=t,n._reject=e})),0===arguments.length?this._promise:this._promise.then(t,e)},callback:function(e,n){return this.then(function(t){e.call(n,t)})},errback:function(e,n){return this.then(null,function(t){e.call(n,t)})},timeout:function(t,e){this.then();var n=this;this._timer=r.setTimeout(function(){n._reject(e)},1e3*t)},setDeferredStatus:function(t,e){this._timer&&r.clearTimeout(this._timer),this.then(),"succeeded"===t?this._resolve(e):"failed"===t?this._reject(e):delete this._promise}}}).call(this,n(11))},function(t,e,n){var s=n(70);t.exports=function(t,e){if(null==t)return{};var n,r=s(t,e);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n]);return r}},function(t,e,n){"use strict";n.d(e,"a",function(){return v});var r=n(0),o=n.n(r),i=n(4),s=n.n(i),a=n(6),c=n.n(a),u=n(2),l=n.n(u),h=n(3),f=n.n(h);function p(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){s()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(){function r(t,e,n){l()(this,r),this.client=t,this.id=e,this.data=void 0,this.full=void 0,this.token=n,this.url="user/".concat(this.id,"/")}var e,n,i;return f()(r,[{key:"ref",value:function(){return"SU:".concat(this.id)}},{key:"delete",value:function(){return this.client.delete({url:this.url,signature:this.token})}},{key:"get",value:(i=c()(o.a.mark(function t(e){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.client.get({url:this.url,signature:this.token,qs:e});case 2:return n=t.sent,this.full=d({},n),delete this.full.duration,this.data=this.full.data,t.abrupt("return",this);case 7:case"end":return t.stop()}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"create",value:(n=c()(o.a.mark(function t(e,n){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.client.post({url:"user/",body:{id:this.id,data:e||this.data||{}},qs:n,signature:this.token});case 2:return r=t.sent,this.full=d({},r),delete this.full.duration,this.data=this.full.data,t.abrupt("return",this);case 7:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)})},{key:"update",value:(e=c()(o.a.mark(function t(e){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.client.put({url:this.url,body:{data:e||this.data||{}},signature:this.token});case 2:return n=t.sent,this.full=d({},n),delete this.full.duration,this.data=this.full.data,t.abrupt("return",this);case 7:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"getOrCreate",value:function(t){return this.create(t,{get_or_create:!0})}},{key:"profile",value:function(){return this.get({with_follow_counts:!0})}}]),r}()},function(t,e){},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,u=[],l=!1,h=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&p())}function p(){if(!l){var t=a(f);l=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";function s(t){this._state=-1,this._value=null,this._defer=[],i(this,t)}var a=n(43);s.prototype.then=function(t,e){var n=new s,r={promise:n,onFulfilled:t,onRejected:e};return-1===this._state?this._defer.push(r):o(this,r),n},s.prototype.catch=function(t){return this.then(null,t)};var i=function(e,t){if("function"==typeof t){var n=0,r=function(t){0==n++&&h(e,t)};try{t(function(t){0==n++&&c(e,t)},r)}catch(t){r(t)}}},o=function(t,e){var n=t._state,r=t._value,i=e.promise,o=[e.onFulfilled,e.onRejected][n];if("function"!=typeof o)return(0,[c,h][n])(i,r);a(function(){try{c(i,o(r))}catch(t){h(i,t)}})},c=function(e,n){if(e===n)return h(e,new TypeError("Recursive promise chain detected"));var r;try{r=u(n)}catch(t){return h(e,t)}if(!r)return l(e,n);i(e,function(t,e){r.call(n,t,e)})},u=function(t){var e=typeof t,n=("object"==e||"function"==e)&&t&&t.then;return"function"==typeof n?n:null},l=function(t,e){r(t,0,e)},h=function(t,e){r(t,1,e)},r=function(t,e,n){var r=t._defer,i=0;if(t._state=e,t._value=n,t._defer=null,0!==r.length)for(;i<r.length;)o(t,r[i++])};s.resolve=function(n){try{if(u(n))return n}catch(t){return s.reject(t)}return new s(function(t,e){t(n)})},s.reject=function(n){return new s(function(t,e){e(n)})},s.all=function(e){return new s(function(n,r){var i=[],o=e.length;if(0===o)return n(i);for(var t=0;t<o;t++)!function(t,e){s.resolve(t).then(function(t){i[e]=t,0==--o&&n(i)},r)}(e[t],t)})},s.race=function(i){return new s(function(t,e){for(var n=0,r=i.length;n<r;n++)s.resolve(i[n]).then(t,e)})},s.deferred=function(){var n={};return n.promise=new s(function(t,e){n.resolve=t,n.reject=e}),n},t.exports=s},function(t,z,B){"use strict";(function(c){var t=B(19),u=B.n(t),e=B(0),l=B.n(e),n=B(6),h=B.n(n),r=B(2),f=B.n(r),i=B(3),o=B.n(i),s=B(4),p=B.n(s),a=B(50),d=B.n(a),v=B(51),g=B.n(v),y=B(52),m=B.n(y),_=B(53),b=B.n(_),w=B(54),k=B.n(w),x=B(55),E=B(21),T=B.n(E),O=B(56),S=B(59),C=B(62),A=B(63),j=B(65),N=B(20),R=B(32),I=B.n(R),U=B(5),D=B(1),L=B(7),P=B(67);function q(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){p()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var F=function(){function a(t,e,n){var r,i=this,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(f()(this,a),p()(this,"replaceReactionOptions",function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t.reactions&&(null!=t.reactions.own&&(t.withOwnReactions=t.reactions.own),null!=t.reactions.recent&&(t.withRecentReactions=t.reactions.recent),null!=t.reactions.counts&&(t.withReactionCounts=t.reactions.counts),null!=t.reactions.own_children&&(t.withOwnChildren=t.reactions.own_children),delete t.reactions)}),p()(this,"handleResponse",function(t){if(/^2/.test("".concat(t.status)))return i.send("response",null,t,t.data),t.data;throw new D.a.StreamApiError("".concat(JSON.stringify(t.data)," with HTTP status code ").concat(t.status),t.data,t)}),p()(this,"doAxiosRequest",function(){var n=h()(l.a.mark(function t(e,n){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i.send("request",e,n),t.prev=1,t.next=4,i.request(i.enrichKwargs(M({method:e},n)));case 4:return r=t.sent,t.abrupt("return",i.handleResponse(r));case 8:if(t.prev=8,t.t0=t.catch(1),t.t0.response)return t.abrupt("return",i.handleResponse(t.t0.response));t.next=12;break;case 12:throw new D.a.SiteError(t.t0.message);case 13:case"end":return t.stop()}},t,null,[[1,8]])}));return function(t,e){return n.apply(this,arguments)}}()),this.baseUrl="https://api.stream-io-api.com/api/",this.baseAnalyticsUrl="https://analytics.stream-io-api.com/analytics/",this.apiKey=t,this.usingApiSecret=null!=e&&!U.a.isJWT(e),this.apiSecret=this.usingApiSecret?e:null,this.userToken=this.usingApiSecret?null:e,this.enrichByDefault=!this.usingApiSecret,null!=this.userToken){var s=k()(this.userToken);if(!s.user_id)throw new TypeError("user_id is missing in user token");this.userId=s.user_id,this.currentUser=this.user(this.userId),this.authPayload=s}if(this.appId=n,this.options=o,this.version=this.options.version||"v1.0",this.fayeUrl=this.options.fayeUrl||"https://faye-us-east.stream-io-api.com/faye",this.fayeClient=null,this.group=this.options.group||"unspecified",this.subscriptions={},this.expireTokens=!!this.options.expireTokens&&this.options.expireTokens,this.location=this.options.location,this.baseUrl=this.getBaseUrl(),void 0!==c&&c.env.LOCAL_FAYE&&(this.fayeUrl="http://localhost:9999/faye/"),void 0!==c&&c.env.STREAM_ANALYTICS_BASE_URL&&(this.baseAnalyticsUrl=c.env.STREAM_ANALYTICS_BASE_URL),this.handlers={},this.browser=void 0!==this.options.browser?this.options.browser:"undefined"!=typeof window,this.node=!this.browser,this.node&&(r=void 0===this.options.keepAlive||this.options.keepAlive,this.nodeOptions={httpAgent:new g.a.Agent({keepAlive:r,keepAliveMsecs:3e3}),httpsAgent:new m.a.Agent({keepAlive:r,keepAliveMsecs:3e3})}),this.request=d.a.create(M({timeout:this.options.timeout||1e4,withCredentials:!1},this.nodeOptions||{})),this.personalization=new x.a(this),this.browser&&this.usingApiSecret)throw new D.a.FeedError('You are publicly sharing your App Secret. Do not expose the App Secret in browsers, "native" mobile apps, or other non-trusted environments.');this.collections=new O.a(this,this.getOrCreateToken()),this.files=new C.a(this,this.getOrCreateToken()),this.images=new A.a(this,this.getOrCreateToken()),this.reactions=new j.a(this,this.getOrCreateToken())}var e,n;return o()(a,[{key:"_throwMissingApiSecret",value:function(){if(!this.usingApiSecret)throw new D.a.SiteError("This method can only be used server-side using your API Secret, use client = stream.connect(key, secret);")}},{key:"getPersonalizationToken",value:function(){return this._personalizationToken||(this._throwMissingApiSecret(),this._personalizationToken=U.a.JWTScopeToken(this.apiSecret,"personalization","*",{userId:"*",feedId:"*",expireTokens:this.expireTokens})),this._personalizationToken}},{key:"getCollectionsToken",value:function(){return this._collectionsToken||(this._throwMissingApiSecret(),this._collectionsToken=U.a.JWTScopeToken(this.apiSecret,"collections","*",{feedId:"*",expireTokens:this.expireTokens})),this._collectionsToken}},{key:"getAnalyticsToken",value:function(){return this._throwMissingApiSecret(),U.a.JWTScopeToken(this.apiSecret,"analytics","*",{userId:"*",expireTokens:this.expireTokens})}},{key:"getBaseUrl",value:function(t){if(t=t||"api",this.options.urlOverride&&this.options.urlOverride[t])return this.options.urlOverride[t];var e="api"===t?"STREAM_BASE_URL":"STREAM_".concat(t.toUpperCase(),"_URL");if(void 0!==c&&c.env[e])return c.env[e];if(void 0!==c&&c.env.LOCAL||this.options.local)return"http://localhost:8000/".concat(t,"/");if(this.location){var n=this.options.protocol||"https";return"".concat(n,"://").concat(this.location,"-").concat(t,".stream-io-api.com/").concat(t,"/")}return"api"!==t?"https://".concat(t,".stream-io-api.com/").concat(t,"/"):this.baseUrl}},{key:"on",value:function(t,e){this.handlers[t]=e}},{key:"off",value:function(t){void 0===t?this.handlers={}:delete this.handlers[t]}},{key:"send",value:function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.handlers[t]&&this.handlers[t].apply(this,n)}},{key:"userAgent",value:function(){return"stream-javascript-client-".concat(this.node?"node":"browser","-").concat(P.version)}},{key:"getReadOnlyToken",value:function(t,e){return L.a.validateFeedSlug(t),L.a.validateUserId(e),U.a.JWTScopeToken(this.apiSecret,"*","read",{feedId:"".concat(t).concat(e),expireTokens:this.expireTokens})}},{key:"getReadWriteToken",value:function(t,e){return L.a.validateFeedSlug(t),L.a.validateUserId(e),U.a.JWTScopeToken(this.apiSecret,"*","*",{feedId:"".concat(t).concat(e),expireTokens:this.expireTokens})}},{key:"feed",value:function(t,e,n){var r=1<arguments.length&&void 0!==e?e:this.userId,i=2<arguments.length?n:void 0;return r instanceof N.a&&(r=r.id),void 0===i&&(i=this.usingApiSecret?U.a.JWTScopeToken(this.apiSecret,"*","*",{feedId:"".concat(t).concat(r)}):this.userToken),new S.a(this,t,r,i)}},{key:"enrichUrl",value:function(t,e){return"".concat(this.getBaseUrl(e)).concat(this.version,"/").concat(t)}},{key:"shouldUseEnrichEndpoint",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};if(e.enrich){var n=e.enrich;return delete e.enrich,n}return this.enrichByDefault||null!=e.ownReactions||null!=e.withRecentReactions||null!=e.withReactionCounts||null!=e.withOwnChildren}},{key:"enrichKwargs",value:function(t){var e=t.method,n=u()(t,["method"]),r=n.signature||this.signature,i=U.a.isJWTSignature(r);return M({method:e,url:this.enrichUrl(n.url,n.serviceName),data:n.body,params:M({api_key:this.apiKey,location:this.group},n.qs||{}),headers:M({"X-Stream-Client":this.userAgent(),"stream-auth-type":i?"jwt":"simple",Authorization:i?r.split(" ").reverse()[0]:r},n.headers||{})},n.axiosOptions||{})}},{key:"getFayeAuthorization",value:function(){var r=this;return{incoming:function(t,e){return e(t)},outgoing:function(t,e){var n;t.subscription&&r.subscriptions[t.subscription]&&(n=r.subscriptions[t.subscription],t.ext={user_id:n.userId,api_key:r.apiKey,signature:n.token}),e(t)}}}},{key:"getFayeClient",value:function(t){var e,n=0<arguments.length&&void 0!==t?t:10;return null===this.fayeClient&&(this.fayeClient=new b.a.Client(this.fayeUrl,{timeout:n}),e=this.getFayeAuthorization(),this.fayeClient.addExtension(e)),this.fayeClient}},{key:"upload",value:function(t,e,n,r,i){var o=L.a.addFileToFormData(e,n,r);return this.doAxiosRequest("POST",{url:t,body:o,headers:o.getHeaders?o.getHeaders():{},signature:this.getOrCreateToken(),axiosOptions:{timeout:0,maxContentLength:1/0,maxBodyLength:1/0,onUploadProgress:i}})}},{key:"get",value:function(t){return this.doAxiosRequest("GET",t)}},{key:"post",value:function(t){return this.doAxiosRequest("POST",t)}},{key:"delete",value:function(t){return this.doAxiosRequest("DELETE",t)}},{key:"put",value:function(t){return this.doAxiosRequest("PUT",t)}},{key:"createUserToken",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:{};return this._throwMissingApiSecret(),U.a.JWTUserSessionToken(this.apiSecret,t,n,{noTimestamp:!this.expireTokens})}},{key:"updateActivities",value:function(t){if(this._throwMissingApiSecret(),!(t instanceof Array))throw new TypeError("The activities argument should be an Array");var e=U.a.JWTScopeToken(this.apiSecret,"activities","*",{feedId:"*",expireTokens:this.expireTokens});return this.post({url:"activities/",body:{activities:t},signature:e})}},{key:"updateActivity",value:function(t){return this._throwMissingApiSecret(),this.updateActivities([t])}},{key:"getActivities",value:function(t){var e=t.ids,n=t.foreignIDTimes,r=u()(t,["ids","foreignIDTimes"]);if(e){if(!(e instanceof Array))throw new TypeError("The ids argument should be an Array");r.ids=e.join(",")}else{if(!n)throw new TypeError("Missing ids or foreignIDTimes params");if(!(n instanceof Array))throw new TypeError("The foreignIDTimes argument should be an Array");var i=[],o=[];n.forEach(function(t){if(!(t instanceof Object))throw new TypeError("foreignIDTimes elements should be Objects");i.push(t.foreignID),o.push(t.time)}),r.foreign_ids=i.join(","),r.timestamps=o.join(",")}var s=this.userToken;this.usingApiSecret&&(s=U.a.JWTScopeToken(this.apiSecret,"activities","*",{feedId:"*",expireTokens:this.expireTokens})),this.replaceReactionOptions(r);var a=this.shouldUseEnrichEndpoint(r)?"enrich/activities/":"activities/";return this.get({url:a,qs:r,signature:s})}},{key:"getOrCreateToken",value:function(){return this._getOrCreateToken||(this._getOrCreateToken=this.usingApiSecret?U.a.JWTScopeToken(this.apiSecret,"*","*",{feedId:"*"}):this.userToken),this._getOrCreateToken}},{key:"user",value:function(t){return new N.a(this,t,this.getOrCreateToken())}},{key:"setUser",value:(n=h()(l.a.mark(function t(e){var n,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.usingApiSecret)throw new D.a.SiteError("This method can only be used client-side using a user token");t.next=2;break;case 2:return delete(n=M({},e)).id,t.next=6,this.currentUser.getOrCreate(n);case 6:return r=t.sent,this.currentUser=r,t.abrupt("return",r);case 9:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"og",value:function(t){return this.get({url:"og/",qs:{url:t},signature:this.getOrCreateToken()})}},{key:"personalizedFeed",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};return this.get({url:"enrich/personalization/feed/",qs:e,signature:this.getOrCreateToken()})}},{key:"activityPartialUpdate",value:(e=h()(l.a.mark(function t(e){var n,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.activitiesPartialUpdate([e]);case 2:return n=t.sent,r=n.activities[0],delete n.activities,t.abrupt("return",M(M({},r),n));case 6:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"activitiesPartialUpdate",value:function(t){if(!(t instanceof Array))throw new TypeError("changes should be an Array");t.forEach(function(t){if(!(t instanceof Object))throw new TypeError("changeset should be and Object");if(t.foreignID&&(t.foreign_id=t.foreignID),void 0===t.id&&(void 0===t.foreign_id||void 0===t.time))throw new TypeError("missing id or foreign ID and time");if(t.set&&!(t.set instanceof Object))throw new TypeError("set field should be an Object");if(t.unset&&!(t.unset instanceof Array))throw new TypeError("unset field should be an Array")});var e=this.userToken;return this.usingApiSecret&&(e=U.a.JWTScopeToken(this.apiSecret,"activities","*",{feedId:"*",expireTokens:this.expireTokens})),this.post({url:"activity/",body:{changes:t},signature:e})}}]),a}();T.a&&Object.keys(T.a).forEach(function(t){Object.prototype.hasOwnProperty.call(T.a,t)&&(F.prototype[t]=T.a[t])}),I.a&&(F.prototype.createRedirectUrl=I.a),z.a=F}).call(this,B(22))},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n},function(t,e,n){"use strict";t.exports={commonElement:function(t,e){for(var n=0,r=t.length;n<r;n++)if(-1!==this.indexOf(e,t[n]))return t[n];return null},indexOf:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},map:function(t,e,n){if(t.map)return t.map(e,n);var r=[];if(t instanceof Array)for(var i=0,o=t.length;i<o;i++)r.push(e.call(n||null,t[i],i));else for(var s in t)t.hasOwnProperty(s)&&r.push(e.call(n||null,s,t[s]));return r},filter:function(t,e,n){if(t.filter)return t.filter(e,n);for(var r=[],i=0,o=t.length;i<o;i++)e.call(n||null,t[i],i)&&r.push(t[i]);return r},asyncEach:function(t,e,n,r){function i(){if(!c){for(c=!0;0<a;)!function(){if(--a,(s+=1)===o)return n&&n.call(r);e(t[s],u)}();c=!1}}var o=t.length,s=-1,a=0,c=!1,u=function(){a+=1,i()};u()}}},function(n,t,e){"use strict";(function(t){var e={_registry:[],on:function(t,e,n,r){function i(){n.call(r)}t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i),this._registry.push({_element:t,_type:e,_callback:n,_context:r,_handler:i})},detach:function(t,e,n,r){for(var i,o=this._registry.length;o--;)i=this._registry[o],t&&t!==i._element||e&&e!==i._type||n&&n!==i._callback||r&&r!==i._context||(i._element.removeEventListener?i._element.removeEventListener(i._type,i._handler,!1):i._element.detachEvent("on"+i._type,i._handler),this._registry.splice(o,1),i=null)}};void 0!==t.onunload&&e.on(t,"unload",e.detach,e),n.exports={Event:e}}).call(this,e(11))},function(t,e,n){"use strict";var r={countListeners:function(t){return this.listeners(t).length},bind:function(t,e,n){function r(){e.apply(n,i.call(arguments))}var i=Array.prototype.slice;return this._listeners=this._listeners||[],this._listeners.push([t,e,n,r]),this.on(t,r)},unbind:function(t,e,n){this._listeners=this._listeners||[];for(var r,i=this._listeners.length;i--;)(r=this._listeners[i])[0]===t&&(e&&(r[1]!==e||r[2]!==n)||(this._listeners.splice(i,1),this.removeListener(t,r[3])))}};n(8)(r,n(91).prototype),r.trigger=r.emit,t.exports=r},function(t,e,n){"use strict";var i=function(t){var e,n,r;if(t instanceof Array){for(e=[],n=t.length;n--;)e[n]=i(t[n]);return e}if("object"!=typeof t)return t;for(r in e=null===t?null:{},t)e[r]=i(t[r]);return e};t.exports=i},function(n,t){function r(t,e){return n.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.exports=r},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){},function(t,e){},function(t,e,n){"use strict";t.exports=function(n,r){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return n.apply(r,t)}}},function(t,e,n){"use strict";var s=n(9);function a(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var r,i,o=n?n(e):s.isURLSearchParams(e)?e.toString():(r=[],s.forEach(e,function(t,e){null!=t&&(s.isArray(t)?e+="[]":t=[t],s.forEach(t,function(t){s.isDate(t)?t=t.toISOString():s.isObject(t)&&(t=JSON.stringify(t)),r.push(a(e)+"="+a(t))}))}),r.join("&"));return o&&(-1!==(i=t.indexOf("#"))&&(t=t.slice(0,i)),t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(a,t,c){"use strict";(function(t){var n=c(9),r=c(77),e={"Content-Type":"application/x-www-form-urlencoded"};function i(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var o,s={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(o=c(38)),o),transformRequest:[function(t,e){return r(e,"Accept"),r(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(i(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)?(i(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return 200<=t&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function(t){s.headers[t]={}}),n.forEach(["post","put","patch"],function(t){s.headers[t]=n.merge(e)}),a.exports=s}).call(this,c(22))},function(t,e,h){"use strict";var f=h(9),p=h(78),d=h(35),v=h(80),g=h(83),y=h(84),m=h(39);t.exports=function(l){return new Promise(function(n,r){var i=l.data,o=l.headers;f.isFormData(i)&&delete o["Content-Type"];var t,e,s=new XMLHttpRequest;l.auth&&(t=l.auth.username||"",e=l.auth.password||"",o.Authorization="Basic "+btoa(t+":"+e));var a,c,u=v(l.baseURL,l.url);if(s.open(l.method.toUpperCase(),d(u,l.params,l.paramsSerializer),!0),s.timeout=l.timeout,s.onreadystatechange=function(){var t,e;s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&(t="getAllResponseHeaders"in s?g(s.getAllResponseHeaders()):null,e={data:l.responseType&&"text"!==l.responseType?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:t,config:l,request:s},p(n,r,e),s=null)},s.onabort=function(){s&&(r(m("Request aborted",l,"ECONNABORTED",s)),s=null)},s.onerror=function(){r(m("Network Error",l,null,s)),s=null},s.ontimeout=function(){var t="timeout of "+l.timeout+"ms exceeded";l.timeoutErrorMessage&&(t=l.timeoutErrorMessage),r(m(t,l,"ECONNABORTED",s)),s=null},f.isStandardBrowserEnv()&&(a=h(85),(c=(l.withCredentials||y(u))&&l.xsrfCookieName?a.read(l.xsrfCookieName):void 0)&&(o[l.xsrfHeaderName]=c)),"setRequestHeader"in s&&f.forEach(o,function(t,e){void 0===i&&"content-type"===e.toLowerCase()?delete o[e]:s.setRequestHeader(e,t)}),f.isUndefined(l.withCredentials)||(s.withCredentials=!!l.withCredentials),l.responseType)try{s.responseType=l.responseType}catch(t){if("json"!==l.responseType)throw t}"function"==typeof l.onDownloadProgress&&s.addEventListener("progress",l.onDownloadProgress),"function"==typeof l.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",l.onUploadProgress),l.cancelToken&&l.cancelToken.promise.then(function(t){s&&(s.abort(),r(t),s=null)}),void 0===i&&(i=null),s.send(i)})}},function(t,e,n){"use strict";var s=n(79);t.exports=function(t,e,n,r,i){var o=new Error(t);return s(o,e,n,r,i)}},function(t,e,n){"use strict";var c=n(9);t.exports=function(e,n){n=n||{};var r={},t=["url","method","params","data"],i=["headers","auth","proxy"],o=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];c.forEach(t,function(t){void 0!==n[t]&&(r[t]=n[t])}),c.forEach(i,function(t){c.isObject(n[t])?r[t]=c.deepMerge(e[t],n[t]):void 0!==n[t]?r[t]=n[t]:c.isObject(e[t])?r[t]=c.deepMerge(e[t]):void 0!==e[t]&&(r[t]=e[t])}),c.forEach(o,function(t){void 0!==n[t]?r[t]=n[t]:void 0!==e[t]&&(r[t]=e[t])});var s=t.concat(i).concat(o),a=Object.keys(n).filter(function(t){return-1===s.indexOf(t)});return c.forEach(a,function(t){void 0!==n[t]?r[t]=n[t]:void 0!==e[t]&&(r[t]=e[t])}),r}},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e){t.exports={VERSION:"1.3.0",BAYEUX_VERSION:"1.0",ID_LENGTH:160,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"]}},function(t,e,n){"use strict";var r=n(89),i=[],o=[],s=r.makeRequestCallFromTimer(function(){if(o.length)throw o.shift()});function a(t){var e=i.length?i.pop():new c;e.task=t,r(e)}function c(){this.task=null}t.exports=a,c.prototype.call=function(){try{this.task.call()}catch(t){a.onerror?a.onerror(t):(o.push(t),s())}finally{this.task=null,i[i.length]=this}}},function(t,e,n){"use strict";var r=n(10),i=n(8),o=n(28),s=n(45),a=r({initialize:function(t){this.id=this.name=t},push:function(t){this.trigger("message",t)},isUnused:function(){return 0===this.countListeners("message")}});i(a.prototype,o),i(a,{HANDSHAKE:"/meta/handshake",CONNECT:"/meta/connect",SUBSCRIBE:"/meta/subscribe",UNSUBSCRIBE:"/meta/unsubscribe",DISCONNECT:"/meta/disconnect",META:"meta",SERVICE:"service",expand:function(t){var e=this.parse(t),n=["/**",t],r=e.slice();r[r.length-1]="*",n.push(this.unparse(r));for(var i=1,o=e.length;i<o;i++)(r=e.slice(0,i)).push("**"),n.push(this.unparse(r));return n},isValid:function(t){return s.CHANNEL_NAME.test(t)||s.CHANNEL_PATTERN.test(t)},parse:function(t){return this.isValid(t)?t.split("/").slice(1):null},unparse:function(t){return"/"+t.join("/")},isMeta:function(t){var e=this.parse(t);return e?e[0]===this.META:null},isService:function(t){var e=this.parse(t);return e?e[0]===this.SERVICE:null},isSubscribable:function(t){return this.isValid(t)?!this.isMeta(t)&&!this.isService(t):null},Set:r({initialize:function(){this._channels={}},getKeys:function(){var t=[];for(var e in this._channels)t.push(e);return t},remove:function(t){delete this._channels[t]},hasSubscription:function(t){return this._channels.hasOwnProperty(t)},subscribe:function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];(this._channels[i]=this._channels[i]||new a(i)).bind("message",e)}},unsubscribe:function(t,e){var n=this._channels[t];return!!n&&(n.unbind("message",e),!!n.isUnused()&&(this.remove(t),!0))},distributeMessage:function(t){for(var e=a.expand(t.channel),n=0,r=e.length;n<r;n++){var i=this._channels[e[n]];i&&i.trigger("message",t)}}})}),t.exports=a},function(t,e,n){"use strict";t.exports={CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*\/\*{1,2}$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)$/,VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*)*$/}},function(t,e,n){"use strict";t.exports={}},function(t,e,n){"use strict";var r=n(10);t.exports=r({initialize:function(){this._index={}},add:function(t){var e=void 0!==t.id?t.id:t;return!this._index.hasOwnProperty(e)&&(this._index[e]=t,!0)},forEach:function(t,e){for(var n in this._index)this._index.hasOwnProperty(n)&&t.call(e,this._index[n])},isEmpty:function(){for(var t in this._index)if(this._index.hasOwnProperty(t))return!1;return!0},member:function(t){for(var e in this._index)if(this._index[e]===t)return!0;return!1},remove:function(t){var e=void 0!==t.id?t.id:t,n=this._index[e];return delete this._index[e],n},toArray:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}})},function(i,t,s){"use strict";(function(c){var t=s(10),o=s(12),u=s(27),e=s(8),n=s(17),r=e(t(s(13),{encode:function(t){return n(t)},request:function(i){var o,t=this.endpoint.href,s=this;if(c.XMLHttpRequest)o=new XMLHttpRequest;else{if(!c.ActiveXObject)return this._handleError(i);o=new ActiveXObject("Microsoft.XMLHTTP")}o.open("POST",t,!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Pragma","no-cache"),o.setRequestHeader("X-Requested-With","XMLHttpRequest");var e=this._dispatcher.headers;for(var n in e)e.hasOwnProperty(n)&&o.setRequestHeader(n,e[n]);function a(){o.abort()}return void 0!==c.onbeforeunload&&u.Event.on(c,"beforeunload",a),o.onreadystatechange=function(){if(o&&4===o.readyState){var t=null,e=o.status,n=o.responseText,r=200<=e&&e<300||304===e||1223===e;if(void 0!==c.onbeforeunload&&u.Event.detach(c,"beforeunload",a),o.onreadystatechange=function(){},o=null,!r)return s._handleError(i);try{t=JSON.parse(n)}catch(t){}t?s._receive(t):s._handleError(i)}},o.send(this.encode(i)),o}}),{isUsable:function(t,e,n,r){var i="ReactNative"===navigator.product||o.isSameOrigin(e);n.call(r,i)}});i.exports=r}).call(this,s(11))},function(t,e,n){"use strict";function r(t,e){this.message=t,this.options=e,this.attempts=0}n(8)(r.prototype,{getTimeout:function(){return this.options.timeout},getInterval:function(){return this.options.interval},isDeliverable:function(){var t=this.options.attempts,e=this.attempts,n=this.options.deadline,r=(new Date).getTime();return!(void 0!==t&&t<=e)&&!(void 0!==n&&n<r)},send:function(){this.attempts+=1},succeed:function(){},fail:function(){},abort:function(){}}),t.exports=r},function(t,e,n){t.exports=n(72)},function(t,e){},function(t,e){},function(t,e,n){"use strict";var r=n(42),i=n(16),o={VERSION:r.VERSION,Client:n(88),Scheduler:n(49)};i.wrapper=o,t.exports=o},function(t,e,n){"use strict";var r=n(104);function i(t){this.message=t}(i.prototype=new Error).name="InvalidTokenError",t.exports=function(t,e){if("string"!=typeof t)throw new i("Invalid token specified");var n=!0===(e=e||{}).header?0:1;try{return JSON.parse(r(t.split(".")[n]))}catch(t){throw new i("Invalid token specified: "+t.message)}},t.exports.InvalidTokenError=i},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(2),i=n.n(r),o=n(3),s=n.n(o),a=function(){function e(t){i()(this,e),this.client=t}return s()(e,[{key:"get",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:{};return this.client.get({url:"".concat(t,"/"),serviceName:"personalization",qs:n,signature:n.token||this.client.getPersonalizationToken()})}},{key:"post",value:function(t,e,n){var r=1<arguments.length&&void 0!==e?e:{},i=2<arguments.length&&void 0!==n?n:{};return this.client.post({url:"".concat(t,"/"),serviceName:"personalization",qs:r,body:i,signature:this.client.getPersonalizationToken()})}},{key:"delete",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:{};return this.client.delete({url:"".concat(t,"/"),serviceName:"personalization",qs:n,signature:this.client.getPersonalizationToken()})}}]),e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return v});var r=n(4),s=n.n(r),i=n(0),a=n.n(i),o=n(6),c=n.n(o),u=n(2),l=n.n(u),h=n(3),f=n.n(h),p=n(1),d=function(){function i(t,e,n,r){l()(this,i),this.collection=e,this.store=t,this.id=n,this.data=r}var t,e,n,r;return f()(i,[{key:"ref",value:function(){return"SO:".concat(this.collection,":").concat(this.id)}},{key:"get",value:(r=c()(a.a.mark(function t(){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.store.get(this.collection,this.id);case 2:return e=t.sent,this.data=e.data,this.full=e,t.abrupt("return",e);case 6:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"add",value:(n=c()(a.a.mark(function t(){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.store.add(this.collection,this.id,this.data);case 2:return e=t.sent,this.data=e.data,this.full=e,t.abrupt("return",e);case 6:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"update",value:(e=c()(a.a.mark(function t(){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.store.update(this.collection,this.id,this.data);case 2:return e=t.sent,this.data=e.data,this.full=e,t.abrupt("return",e);case 6:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"delete",value:(t=c()(a.a.mark(function t(){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.store.delete(this.collection,this.id);case 2:return e=t.sent,this.data=null,this.full=null,t.abrupt("return",e);case 6:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})}]),i}(),v=function(){function n(t,e){l()(this,n),s()(this,"buildURL",function(t,e){var n="collections/".concat(t,"/");return void 0===e?n:"".concat(n).concat(e,"/")}),this.client=t,this.token=e}var r,i,o;return f()(n,[{key:"entry",value:function(t,e,n){return new d(this,t,e,n)}},{key:"get",value:(o=c()(a.a.mark(function t(e,n){var r,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.client.get({url:this.buildURL(e,n),signature:this.token});case 2:return r=t.sent,(i=this.client.collections.entry(r.collection,r.id,r.data)).full=r,t.abrupt("return",i);case 6:case"end":return t.stop()}},t,this)})),function(t,e){return o.apply(this,arguments)})},{key:"add",value:(i=c()(a.a.mark(function t(e,n,r){var i,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.client.post({url:this.buildURL(e),body:{id:null===n?void 0:n,data:r},signature:this.token});case 2:return i=t.sent,(o=this.client.collections.entry(i.collection,i.id,i.data)).full=i,t.abrupt("return",o);case 6:case"end":return t.stop()}},t,this)})),function(t,e,n){return i.apply(this,arguments)})},{key:"update",value:(r=c()(a.a.mark(function t(e,n,r){var i,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.client.put({url:this.buildURL(e,n),body:{data:r},signature:this.token});case 2:return i=t.sent,(o=this.client.collections.entry(i.collection,i.id,i.data)).full=i,t.abrupt("return",o);case 6:case"end":return t.stop()}},t,this)})),function(t,e,n){return r.apply(this,arguments)})},{key:"delete",value:function(t,e){return this.client.delete({url:this.buildURL(t,e),signature:this.token})}},{key:"upsert",value:function(t,e){if(!this.client.usingApiSecret)throw new p.a.SiteError("This method can only be used server-side using your API Secret");return Array.isArray(e)||(e=[e]),this.client.post({url:"collections/",serviceName:"api",body:{data:s()({},t,e)},signature:this.client.getCollectionsToken()})}},{key:"select",value:function(e,t){if(!this.client.usingApiSecret)throw new p.a.SiteError("This method can only be used server-side using your API Secret");return Array.isArray(t)||(t=[t]),this.client.get({url:"collections/",serviceName:"api",qs:{foreign_ids:t.map(function(t){return"".concat(e,":").concat(t)}).join(",")},signature:this.client.getCollectionsToken()})}},{key:"deleteMany",value:function(t,e){if(!this.client.usingApiSecret)throw new p.a.SiteError("This method can only be used server-side using your API Secret");Array.isArray(e)||(e=[e]);var n={collection_name:t,ids:e.map(function(t){return t.toString()}).join(",")};return this.client.delete({url:"collections/",serviceName:"api",qs:n,signature:this.client.getCollectionsToken()})}}]),n}()},function(t,e,n){var r=n(14),i=n(31);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}},function(e,t,n){var r=n(25),i=n(30),o=n(106),s=n(107);function a(t){var n="function"==typeof Map?new Map:void 0;return e.exports=a=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return s(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},a(t)}e.exports=a},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n(4),o=n.n(r),i=n(2),s=n.n(i),a=n(3),c=n.n(a),u=n(20),l=n(1),h=n(7);function f(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}var p=function(){function i(t,e,n,r){if(s()(this,i),!e||!n)throw new l.a.FeedError('Please provide a feed slug and user id, ie client.feed("user", "1")');if(-1!==e.indexOf(":"))throw new l.a.FeedError('Please initialize the feed using client.feed("user", "1") not client.feed("user:1")');if(h.a.validateFeedSlug(e),h.a.validateUserId(n),!r)throw new l.a.FeedError("Missing token, in client side mode please provide a feed secret");this.client=t,this.slug=e,this.userId=n,this.id="".concat(this.slug,":").concat(this.userId),this.token=r,this.feedUrl=this.id.replace(":","/"),this.feedTogether=this.id.replace(":",""),this.signature="".concat(this.feedTogether," ").concat(this.token),this.notificationChannel="site-".concat(this.client.appId,"-feed-").concat(this.feedTogether),this.enrichByDefault=!1}return c()(i,[{key:"addActivity",value:function(t){return!(t=h.a.replaceStreamObjects(t)).actor&&this.client.currentUser&&(t.actor=this.client.currentUser.ref()),this.client.post({url:"feed/".concat(this.feedUrl,"/"),body:t,signature:this.signature})}},{key:"removeActivity",value:function(t){return this.client.delete({url:"feed/".concat(this.feedUrl,"/").concat(t.foreignId||t,"/"),qs:t.foreignId?{foreign_id:"1"}:{},signature:this.signature})}},{key:"addActivities",value:function(t){return this.client.post({url:"feed/".concat(this.feedUrl,"/"),body:{activities:h.a.replaceStreamObjects(t)},signature:this.signature})}},{key:"follow",value:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:{};e instanceof u.a&&(e=e.id),h.a.validateFeedSlug(t),h.a.validateUserId(e);var i={target:"".concat(t,":").concat(e)};return"number"==typeof r.limit&&(i.activity_copy_limit=r.limit),this.client.post({url:"feed/".concat(this.feedUrl,"/following/"),body:i,signature:this.signature})}},{key:"unfollow",value:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:{},i={};"boolean"==typeof r.keepHistory&&r.keepHistory&&(i.keep_history="1"),h.a.validateFeedSlug(t),h.a.validateUserId(e);var o="".concat(t,":").concat(e);return this.client.delete({url:"feed/".concat(this.feedUrl,"/following/").concat(o,"/"),qs:i,signature:this.signature})}},{key:"following",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};return e.filter&&(e.filter=e.filter.join(",")),this.client.get({url:"feed/".concat(this.feedUrl,"/following/"),qs:e,signature:this.signature})}},{key:"followers",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};return e.filter&&(e.filter=e.filter.join(",")),this.client.get({url:"feed/".concat(this.feedUrl,"/followers/"),qs:e,signature:this.signature})}},{key:"get",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};e.mark_read&&e.mark_read.join&&(e.mark_read=e.mark_read.join(",")),e.mark_seen&&e.mark_seen.join&&(e.mark_seen=e.mark_seen.join(",")),this.client.replaceReactionOptions(e);var n=this.client.shouldUseEnrichEndpoint(e)?"enrich/feed/":"feed/";return this.client.get({url:"".concat(n).concat(this.feedUrl,"/"),qs:e,signature:this.signature})}},{key:"getActivityDetail",value:function(t,e){return this.get(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id_lte:t,id_gte:t,limit:1},e||{}))}},{key:"getFayeClient",value:function(){return this.client.getFayeClient()}},{key:"subscribe",value:function(t){if(!this.client.appId)throw new l.a.SiteError("Missing app id, which is needed to subscribe, use var client = stream.connect(key, secret, appId);");var e=this.getFayeClient().subscribe("/".concat(this.notificationChannel),t);return this.client.subscriptions["/".concat(this.notificationChannel)]={token:this.token,userId:this.notificationChannel,fayeSubscription:e},e}},{key:"unsubscribe",value:function(){var t=this.client.subscriptions["/".concat(this.notificationChannel)];t&&(delete this.client.subscriptions["/".concat(this.notificationChannel)],t.fayeSubscription.cancel())}},{key:"updateActivityToTargets",value:function(t,e,n,r,i){if(!t)throw new Error("Missing `foreign_id` parameter!");if(!e)throw new Error("Missing `time` parameter!");if(!n&&!r&&!i)throw new Error('Requires you to provide at least one parameter for `newTargets`, `addedTargets`, or `removedTargets` - example: `updateActivityToTargets("foreignID:1234", new Date(), [newTargets...], [addedTargets...], [removedTargets...])`');if(n&&(r||i))throw new Error("Can't include add_targets or removedTargets if you're also including newTargets");r&&i&&r.forEach(function(t){if(i.includes(t))throw new Error("Can't have the same feed ID in addedTargets and removedTargets.")});var o={foreign_id:t,time:e};return n&&(o.new_targets=n),r&&(o.added_targets=r),i&&(o.removed_targets=i),this.client.post({url:"feed_targets/".concat(this.feedUrl,"/activity_to_targets/"),signature:this.signature,body:o})}}]),i}()},function(t,e,n){var r=n(109),i=n(110),o=n(111),s=n(113);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||s()}},function(t,e){t.exports="object"==typeof self?self.FormData:window.FormData},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(2),i=n.n(r),o=n(3),s=n.n(o),a=function(){function n(t,e){i()(this,n),this.client=t,this.token=e}return s()(n,[{key:"upload",value:function(t,e,n,r){return this.client.upload("files/",t,e,n,r)}},{key:"delete",value:function(t){return this.client.delete({url:"files/",qs:{url:t},signature:this.token})}}]),n}()},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(64),i=n.n(r),o=n(2),s=n.n(o),a=n(3),c=n.n(a),u=function(){function n(t,e){s()(this,n),this.client=t,this.token=e}return c()(n,[{key:"upload",value:function(t,e,n,r){return this.client.upload("images/",t,e,n,r)}},{key:"delete",value:function(t){return this.client.delete({url:"images/",qs:{url:t},signature:this.token})}},{key:"process",value:function(t,e){var n=i()(e,{url:t});return Array.isArray(n.crop)&&(n.crop=n.crop.join(",")),this.client.get({url:"images/",qs:n,signature:this.token})}},{key:"thumbnail",value:function(t,e,n,r){var i=3<arguments.length&&void 0!==r?r:{crop:"center",resize:"clip"},o=i.crop,s=i.resize;return this.process(t,{w:e,h:n,crop:o,resize:s})}}]),n}()},function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n.apply(this,arguments)}t.exports=n},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(19),c=n.n(r),i=n(2),o=n.n(i),s=n(3),a=n.n(s),u=n(4),l=n.n(u),h=n(1),f=function(){function n(t,e){o()(this,n),l()(this,"buildURL",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"".concat(["reaction"].concat(e).join("/"),"/")}),l()(this,"_convertTargetFeeds",function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map(function(t){return"string"==typeof t?t:t.id})}),this.client=t,this.token=e,this.signature=e}return a()(n,[{key:"all",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};return this.client.get({url:this.buildURL(),signature:this.signature,qs:e})}},{key:"add",value:function(t,e,n,r){var i=2<arguments.length&&void 0!==n?n:{},o=3<arguments.length&&void 0!==r?r:{},s=o.id,a=o.targetFeeds,c=void 0===a?[]:a,u=o.userId,l=o.targetFeedsExtraData,h={id:s,activity_id:e instanceof Object?e.id:e,kind:t,data:i,target_feeds:this._convertTargetFeeds(c),user_id:u};return null!=l&&(h.target_feeds_extra_data=l),this.client.post({url:this.buildURL(),body:h,signature:this.signature})}},{key:"addChild",value:function(t,e,n,r){var i=2<arguments.length&&void 0!==n?n:{},o=3<arguments.length&&void 0!==r?r:{},s=o.targetFeeds,a=void 0===s?[]:s,c=o.userId,u=o.targetFeedsExtraData,l={parent:e instanceof Object?e.id:e,kind:t,data:i,target_feeds:this._convertTargetFeeds(a),user_id:c};return null!=u&&(l.target_feeds_extra_data=u),this.client.post({url:this.buildURL(),body:l,signature:this.signature})}},{key:"get",value:function(t){return this.client.get({url:this.buildURL(t),signature:this.signature})}},{key:"filter",value:function(t){var e=t.user_id,n=t.activity_id,r=t.reaction_id,i=c()(t,["user_id","activity_id","reaction_id"]);if(i.limit||(i.limit=10),(e?1:0)+(n?1:0)+(r?1:0)!=1)throw new h.a.SiteError("Must provide exactly one value for one of these params: user_id, activity_id, reaction_id");var o=(e?"user_id":n&&"activity_id")||r&&"reaction_id",s=e||n||r,a=t.kind?this.buildURL(o,s,t.kind):this.buildURL(o,s);return this.client.get({url:a,qs:i,signature:this.signature})}},{key:"update",value:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:{},i=r.targetFeeds,o=void 0===i?[]:i,s=r.targetFeedsExtraData,a={data:e,target_feeds:this._convertTargetFeeds(o)};return null!=s&&(a.target_feeds_extra_data=s),this.client.put({url:this.buildURL(t),body:a,signature:this.signature})}},{key:"delete",value:function(t){return this.client.delete({url:this.buildURL(t),signature:this.signature})}}]),n}()},function(r,i,o){var s,a,c;!function(t){"use strict";var e,n;null!=i&&"number"!=typeof i.nodeType?r.exports=t():null!=o(114)?(a=[],void 0===(c="function"==typeof(s=t)?s.apply(i,a):s)||(r.exports=c)):(e=t(),"function"!=typeof(n="undefined"!=typeof self?self:$.global).btoa&&(n.btoa=e.btoa),"function"!=typeof n.atob&&(n.atob=e.atob))}(function(){"use strict";var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function c(t){this.message=t}return(c.prototype=new Error).name="InvalidCharacterError",{btoa:function(t){for(var e,n,r=String(t),i=0,o=a,s="";r.charAt(0|i)||(o="=",i%1);s+=o.charAt(63&e>>8-i%1*8)){if(255<(n=r.charCodeAt(i+=.75)))throw new c("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|n}return s},atob:function(t){var e=String(t).replace(/[=]+$/,"");if(e.length%4==1)throw new c("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,o=0,s="";r=e.charAt(o++);~r&&(n=i%4?64*n+r:r,i++%4)&&(s+=String.fromCharCode(255&n>>(-2*i&6))))r=a.indexOf(r);return s}}})},function(t){t.exports=JSON.parse('{"author":{"name":"Thierry Schellenbach","company":"Stream.io Inc"},"name":"getstream","description":"The official low-level GetStream.io client for Node.js and the browser.","main":"./lib/getstream.js","module":"./lib/getstream.js","types":"./types/getstream/index.d.ts","homepage":"https://getstream.io/docs/?language=js","email":"support@getstream.io","license":"BSD-3-Clause","version":"5.0.5","scripts":{"build":"babel src --out-dir lib","dtslint":"dtslint types/getstream","eslint":"eslint \'**/*.js\' --max-warnings 0","prettier":"prettier --list-different \'**/*.{js,ts}\'","lint":"yarn run prettier && yarn run eslint","lint-fix":"prettier --write \'**/*.{js,ts}\' && eslint --fix \'**/*.js\'","test":"yarn run test-unit-node","test-unit-node":"mocha --require @babel/register test/unit/common test/unit/node","test-integration-node":"mocha --require @babel/register test/integration/common test/integration/node --exit","test-cloud":"mocha --require @babel/register test/integration/cloud --timeout 40000","test-cloud-local":"LOCAL=true mocha --require @babel/register test/integration/cloud --timeout 40000 -i --grep \'Files|Images\'","test-browser":"karma start karma.config.js","generate-docs":"jsdoc -c .jsdoc","coverage":"nyc yarn run test-unit-node && nyc report --reporter=text-lcov | codecov --pipe","preversion":"yarn run test-unit-node","dist":"webpack && webpack --minify","version":"yarn run dist && yarn run build && git add dist","postversion":"git push && git push --tags"},"husky":{"hooks":{"pre-commit":"dotgit/hooks/pre-commit-format.sh && dotgit/hooks/pre-commit-reject-binaries.py"}},"browser":{"crypto":false,"jsonwebtoken":false,"./lib/lib/batch_operations.js":false,"qs":false,"url":false,"http":false,"https":false},"react-native":{"crypto":false,"jsonwebtoken":false,"./lib/lib/batch_operations.js":false,"qs":false,"url":false},"devDependencies":{"@babel/cli":"^7.10.4","@babel/core":"^7.10.4","@babel/node":"^7.10.4","@babel/plugin-proposal-class-properties":"^7.10.4","@babel/plugin-transform-object-assign":"^7.10.4","@babel/plugin-transform-runtime":"^7.10.4","@babel/preset-env":"^7.10.4","@babel/register":"^7.10.4","@types/node":"^14.0.14","babel-eslint":"^10.1.0","babel-loader":"^8.1.0","chai":"^4.2.0","codecov":"^3.7.1","dtslint":"^3.6.12","eslint":"^7.3.1","eslint-config-airbnb-base":"^14.2.0","eslint-config-prettier":"^6.11.0","eslint-plugin-chai-friendly":"^0.6.0","eslint-plugin-import":"^2.22.0","eslint-plugin-prettier":"^3.1.4","eslint-plugin-sonarjs":"^0.5.0","expect.js":"^0.3.1","husky":"^4.2.5","jsdoc":"^3.6.4","json-loader":"~0.5.7","karma":"^5.1.0","karma-chrome-launcher":"^3.1.0","karma-mocha":"^2.0.1","karma-mocha-reporter":"~2.2.5","karma-sauce-launcher":"^4.1.5","karma-sourcemap-loader":"~0.3.7","karma-webpack":"^4.0.2","mocha":"^8.0.1","null-loader":"^4.0.0","nyc":"^15.1.0","prettier":"^2.0.5","request":"^2.88.2","testdouble":"^3.16.0","typescript":"^3.9.5","uglifyjs-webpack-plugin":"^2.2.0","webpack":"^4.43.0","webpack-cli":"^3.3.12"},"dependencies":{"@babel/runtime":"^7.10.4","Base64":"^1.1.0","axios":"^0.19.2","faye":"^1.3.0","form-data":"^3.0.0","jsonwebtoken":"^8.5.1","jwt-decode":"^2.2.0","qs":"^6.9.4"},"repository":{"type":"git","url":"git://github.com/GetStream/stream-js.git"},"files":["dist","lib","types"],"engines":{"node":"10 || 12 || >=14"}}')},function(t,e,n){t.exports=n(69)},function(t,r,i){"use strict";i.r(r),function(s){i.d(r,"connect",function(){return n});var a=i(24);i.d(r,"Client",function(){return a.a});var t=i(1);i.d(r,"errors",function(){return t.a});var e=i(5);function n(t,e,n,r){var i,o;return void 0!==s&&s.env&&s.env.STREAM_URL&&!t&&(t=(i=/https:\/\/(\w+):(\w+)@([\w-]*).*\?app_id=(\d+)/.exec(s.env.STREAM_URL))[1],e=i[2],o=i[3],n=i[4],void 0===r&&(r={}),"getstream"!==o&&"stream-io-api"!==o&&(r.location=o)),new a.a(t,e,n,r)}i.d(r,"signing",function(){return e.a}),r.default={connect:n,errors:t.a,signing:e.a,Client:a.a}}.call(this,i(22))},function(t,e){t.exports=function(t,e){if(null==t)return{};for(var n,r={},i=Object.keys(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||(r[n]=t[n]);return r}},function(t,e,n){var r=function(s){"use strict";var h,t=Object.prototype,l=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},i=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",r=e.toStringTag||"@@toStringTag";function a(t,e,n,r){var o,s,a,c,i=e&&e.prototype instanceof m?e:m,u=Object.create(i.prototype),l=new O(r||[]);return u._invoke=(o=t,s=n,a=l,c=p,function(t,e){if(c===v)throw new Error("Generator is already running");if(c===g){if("throw"===t)throw e;return C()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){var r=function t(e,n){var r=e.iterator[n.method];if(r===h){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=h,t(e,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=f(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=h),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}(n,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===p)throw c=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=v;var i=f(o,s,a);if("normal"===i.type){if(c=a.done?g:d,i.arg===y)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(c=g,a.method="throw",a.arg=i.arg)}}),u}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}s.wrap=a;var p="suspendedStart",d="suspendedYield",v="executing",g="completed",y={};function m(){}function o(){}function c(){}var u={};u[i]=function(){return this};var _=Object.getPrototypeOf,b=_&&_(_(S([])));b&&b!==t&&l.call(b,i)&&(u=b);var w=c.prototype=m.prototype=Object.create(u);function k(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function x(c,u){var e;this._invoke=function(n,r){function t(){return new u(function(t,e){!function e(t,n,r,i){var o=f(c[t],c,n);if("throw"!==o.type){var s=o.arg,a=s.value;return a&&"object"==typeof a&&l.call(a,"__await")?u.resolve(a.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):u.resolve(a).then(function(t){s.value=t,r(s)},function(t){return e("throw",t,r,i)})}i(o.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(l.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=h,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:h,done:!0}}return(o.prototype=w.constructor=c).constructor=o,c[r]=o.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,r in t||(t[r]="GeneratorFunction")),t.prototype=Object.create(w),t},s.awrap=function(t){return{__await:t}},k(x.prototype),x.prototype[n]=function(){return this},s.AsyncIterator=x,s.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new x(a(t,e,n,r),i);return s.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},k(w),w[r]="Generator",w[i]=function(){return this},w.toString=function(){return"[object Generator]"},s.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},s.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=h)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=h),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var s=l.call(i,"catchLoc"),a=l.call(i,"finallyLoc");if(s&&a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r,i=n.completion;return"throw"===i.type&&(r=i.arg,T(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=h),y}},s}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){"use strict";var r=n(9),i=n(34),o=n(73),s=n(40);function a(t){var e=new o(t),n=i(o.prototype.request,e);return r.extend(n,o.prototype,e),r.extend(n,e),n}var c=a(n(37));c.Axios=o,c.create=function(t){return a(s(c.defaults,t))},c.Cancel=n(41),c.CancelToken=n(86),c.isCancel=n(36),c.all=function(t){return Promise.all(t)},c.spread=n(87),t.exports=c,t.exports.default=c},function(t,e,n){"use strict";var i=n(9),r=n(35),o=n(74),s=n(75),a=n(40);function c(t){this.defaults=t,this.interceptors={request:new o,response:new o}}c.prototype.request=function(t,e){"string"==typeof t?(t=e||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=[s,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){n.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){n.push(t.fulfilled,t.rejected)});n.length;)r=r.then(n.shift(),n.shift());return r},c.prototype.getUri=function(t){return t=a(this.defaults,t),r(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(n){c.prototype[n]=function(t,e){return this.request(i.merge(e||{},{method:n,url:t}))}}),i.forEach(["post","put","patch"],function(r){c.prototype[r]=function(t,e,n){return this.request(i.merge(n||{},{method:r,url:t,data:e}))}}),t.exports=c},function(t,e,n){"use strict";var r=n(9);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},t.exports=i},function(t,e,n){"use strict";var r=n(9),i=n(76),o=n(36),s=n(37);function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(e){return a(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return a(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return o(t)||(a(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(t,e,n){"use strict";var r=n(9);t.exports=function(e,n,t){return r.forEach(t,function(t){e=t(e,n)}),e}},function(t,e,n){"use strict";var i=n(9);t.exports=function(n,r){i.forEach(n,function(t,e){e!==r&&e.toUpperCase()===r.toUpperCase()&&(n[r]=t,delete n[e])})}},function(t,e,n){"use strict";var i=n(39);t.exports=function(t,e,n){var r=n.config.validateStatus;!r||r(n.status)?t(n):e(i("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,n){"use strict";var r=n(81),i=n(82);t.exports=function(t,e){return t&&!r(e)?i(t,e):e}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var o=n(9),s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,r,i={};return t&&o.forEach(t.split("\n"),function(t){if(r=t.indexOf(":"),e=o.trim(t.substr(0,r)).toLowerCase(),n=o.trim(t.substr(r+1)),e){if(i[e]&&0<=s.indexOf(e))return;i[e]="set-cookie"===e?(i[e]?i[e]:[]).concat([n]):i[e]?i[e]+", "+n:n}}),i}},function(t,e,n){"use strict";var r,i,o,s=n(9);function a(t){var e=t;return i&&(o.setAttribute("href",e),e=o.href),o.setAttribute("href",e),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}t.exports=s.isStandardBrowserEnv()?(i=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),r=a(window.location.href),function(t){var e=s.isString(t)?a(t):t;return e.protocol===r.protocol&&e.host===r.host}):function(){return!0}},function(t,e,n){"use strict";var a=n(9);t.exports=a.isStandardBrowserEnv()?{write:function(t,e,n,r,i,o){var s=[];s.push(t+"="+encodeURIComponent(e)),a.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),a.isString(r)&&s.push("path="+r),a.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var r=n(41);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new r(t),e(n.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},t.exports=i},function(t,e,n){"use strict";t.exports=function(e){return function(t){return e.apply(null,t)}}},function(m,t,_){"use strict";(function(i){var o=_(43),t=_(10),s=(_(23),_(26)),n=_(27),a=_(42),e=_(8),c=_(90),r=_(18),u=_(16),l=_(28),h=_(44),f=_(92),p=_(100),d=_(101),v=_(102),g=_(103),y=t({className:"Client",UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:"handshake",RETRY:"retry",NONE:"none",CONNECTION_TIMEOUT:60,DEFAULT_ENDPOINT:"/bayeux",INTERVAL:0,initialize:function(t,e){this.info("New client created for ?",t),c(e=e||{},["interval","timeout","endpoints","proxy","retry","scheduler","websocketExtensions","tls","ca"]),this._channels=new h.Set,this._dispatcher=f.create(this,t||this.DEFAULT_ENDPOINT,e),this._messageId=0,this._state=this.UNCONNECTED,this._responseCallbacks={},this._advice={reconnect:this.RETRY,interval:1e3*(e.interval||this.INTERVAL),timeout:1e3*(e.timeout||this.CONNECTION_TIMEOUT)},this._dispatcher.timeout=this._advice.timeout/1e3,this._dispatcher.bind("message",this._receiveMessage,this),n.Event&&void 0!==i.onbeforeunload&&n.Event.on(i,"beforeunload",function(){s.indexOf(this._dispatcher._disabled,"autodisconnect")<0&&this.disconnect()},this)},addWebsocketExtension:function(t){return this._dispatcher.addWebsocketExtension(t)},disable:function(t){return this._dispatcher.disable(t)},setHeader:function(t,e){return this._dispatcher.setHeader(t,e)},handshake:function(e,n){var r;this._advice.reconnect!==this.NONE&&this._state===this.UNCONNECTED&&(this._state=this.CONNECTING,(r=this).info("Initiating handshake with ?",this._dispatcher.endpoint.href),this._dispatcher.selectTransport(a.MANDATORY_CONNECTION_TYPES),this._sendMessage({channel:h.HANDSHAKE,version:a.BAYEUX_VERSION,supportedConnectionTypes:this._dispatcher.getConnectionTypes()},{},function(t){t.successful?(this._state=this.CONNECTED,this._dispatcher.clientId=t.clientId,this._dispatcher.selectTransport(t.supportedConnectionTypes),this.info("Handshake successful: ?",this._dispatcher.clientId),this.subscribe(this._channels.getKeys(),!0),e&&o(function(){e.call(n)})):(this.info("Handshake unsuccessful"),i.setTimeout(function(){r.handshake(e,n)},1e3*this._dispatcher.retry),this._state=this.UNCONNECTED)},this))},connect:function(t,e){if(this._advice.reconnect!==this.NONE&&this._state!==this.DISCONNECTED){if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(t,e)},this);this.callback(t,e),this._state===this.CONNECTED&&(this.info("Calling deferred actions for ?",this._dispatcher.clientId),this.setDeferredStatus("succeeded"),this.setDeferredStatus("unknown"),this._connectRequest||(this._connectRequest=!0,this.info("Initiating connection for ?",this._dispatcher.clientId),this._sendMessage({channel:h.CONNECT,clientId:this._dispatcher.clientId,connectionType:this._dispatcher.connectionType},{},this._cycleConnection,this)))}},disconnect:function(){if(this._state===this.CONNECTED){this._state=this.DISCONNECTED,this.info("Disconnecting ?",this._dispatcher.clientId);var e=new v;return this._sendMessage({channel:h.DISCONNECT,clientId:this._dispatcher.clientId},{},function(t){t.successful?(this._dispatcher.close(),e.setDeferredStatus("succeeded")):e.setDeferredStatus("failed",p.parse(t.error))},this),this.info("Clearing channel listeners for ?",this._dispatcher.clientId),this._channels=new h.Set,e}},subscribe:function(n,e,r){if(n instanceof Array)return s.map(n,function(t){return this.subscribe(t,e,r)},this);var i=new g(this,n,e,r),t=!0===e;return this._channels.hasSubscription(n)&&!t?(this._channels.subscribe([n],i),i.setDeferredStatus("succeeded")):this.connect(function(){this.info("Client ? attempting to subscribe to ?",this._dispatcher.clientId,n),t||this._channels.subscribe([n],i),this._sendMessage({channel:h.SUBSCRIBE,clientId:this._dispatcher.clientId,subscription:n},{},function(t){if(!t.successful)return i.setDeferredStatus("failed",p.parse(t.error)),this._channels.unsubscribe(n,i);var e=[].concat(t.subscription);this.info("Subscription acknowledged for ? to ?",this._dispatcher.clientId,e),i.setDeferredStatus("succeeded")},this)},this),i},unsubscribe:function(t,e){if(t instanceof Array)return s.map(t,function(t){return this.unsubscribe(t,e)},this);this._channels.unsubscribe(t,e)&&this.connect(function(){this.info("Client ? attempting to unsubscribe from ?",this._dispatcher.clientId,t),this._sendMessage({channel:h.UNSUBSCRIBE,clientId:this._dispatcher.clientId,subscription:t},{},function(t){var e;t.successful&&(e=[].concat(t.subscription),this.info("Unsubscription acknowledged for ? from ?",this._dispatcher.clientId,e))},this)},this)},publish:function(t,e,n){c(n||{},["attempts","deadline"]);var r=new v;return this.connect(function(){this.info("Client ? queueing published message to ?: ?",this._dispatcher.clientId,t,e),this._sendMessage({channel:t,data:e,clientId:this._dispatcher.clientId},n,function(t){t.successful?r.setDeferredStatus("succeeded"):r.setDeferredStatus("failed",p.parse(t.error))},this)},this),r},_sendMessage:function(t,e,n,r){t.id=this._generateMessageId();var i=this._advice.timeout?1.2*this._advice.timeout/1e3:1.2*this._dispatcher.retry;this.pipeThroughExtensions("outgoing",t,null,function(t){t&&(n&&(this._responseCallbacks[t.id]=[n,r]),this._dispatcher.sendMessage(t,i,e||{}))},this)},_generateMessageId:function(){return this._messageId+=1,this._messageId>=Math.pow(2,32)&&(this._messageId=0),this._messageId.toString(36)},_receiveMessage:function(t){var e,n=t.id;void 0!==t.successful&&(e=this._responseCallbacks[n],delete this._responseCallbacks[n]),this.pipeThroughExtensions("incoming",t,null,function(t){t&&(t.advice&&this._handleAdvice(t.advice),this._deliverMessage(t),e&&e[0].call(e[1],t))},this)},_handleAdvice:function(t){e(this._advice,t),this._dispatcher.timeout=this._advice.timeout/1e3,this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED&&(this._state=this.UNCONNECTED,this._dispatcher.clientId=null,this._cycleConnection())},_deliverMessage:function(t){t.channel&&void 0!==t.data&&(this.info("Client ? calling listeners for ? with ?",this._dispatcher.clientId,t.channel,t.data),this._channels.distributeMessage(t))},_cycleConnection:function(){this._connectRequest&&(this._connectRequest=null,this.info("Closed connection for ?",this._dispatcher.clientId));var t=this;i.setTimeout(function(){t.connect()},this._advice.interval)}});e(y.prototype,r),e(y.prototype,l),e(y.prototype,u),e(y.prototype,d),m.exports=y}).call(this,_(11))},function(f,t,e){"use strict";(function(t){function e(t){r.length||(n(),0),r[r.length]=t}f.exports=e;var n,r=[],i=0;function o(){for(;i<r.length;){var t=i;if(i+=1,r[t].call(),1024<i){for(var e=0,n=r.length-i;e<n;e++)r[e]=r[e+i];r.length-=i,i=0}}r.length=0,i=0,0}var s,a,c,u=void 0!==t?t:self,l=u.MutationObserver||u.WebKitMutationObserver;function h(r){return function(){var t=setTimeout(n,0),e=setInterval(n,50);function n(){clearTimeout(t),clearInterval(e),r()}}}n="function"==typeof l?(s=1,a=new l(o),c=document.createTextNode(""),a.observe(c,{characterData:!0}),function(){s=-s,c.data=s}):h(o),e.requestFlush=n,e.makeRequestCallFromTimer=h}).call(this,e(11))},function(t,e,n){"use strict";var r=n(26);t.exports=function(t,e){for(var n in t)if(r.indexOf(e,n)<0)throw new Error("Unrecognized option: "+n)}},function(t,e){var s="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};function n(){}(t.exports=n).prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||s(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);e.apply(this,n)}return!0}if(s(e)){for(var n=Array.prototype.slice.call(arguments,1),r=e.slice(),i=0,o=r.length;i<o;i++)r[i].apply(this,n);return!0}return!1},n.prototype.on=n.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");return this._events||(this._events={}),this.emit("newListener",t,e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,this},n.prototype.once=function(e,n){var r=this;return r.on(e,function t(){r.removeListener(e,t),n.apply(this,arguments)}),this},n.prototype.removeListener=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var n=this._events[t];if(s(n)){var r=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}(n,e);if(r<0)return this;n.splice(r,1),0==n.length&&delete this._events[t]}else this._events[t]===e&&delete this._events[t];return this},n.prototype.removeAllListeners=function(t){return 0===arguments.length?this._events={}:t&&this._events&&this._events[t]&&(this._events[t]=null),this},n.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),s(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}},function(l,t,h){"use strict";(function(s){var t=h(10),a=h(12),c=h(46),e=h(8),n=h(16),r=h(28),i=h(93),u=h(49),o=t({className:"Dispatcher",MAX_REQUEST_SIZE:2048,DEFAULT_RETRY:5,UP:1,DOWN:2,initialize:function(t,e,n){this._client=t,this.endpoint=a.parse(e),this._alternates=n.endpoints||{},this.cookies=c.CookieJar&&new c.CookieJar,this._disabled=[],this._envelopes={},this.headers={},this.retry=n.retry||this.DEFAULT_RETRY,this._scheduler=n.scheduler||u,this._state=0,this.transports={},this.wsExtensions=[],this.proxy=n.proxy||{},"string"==typeof this._proxy&&(this._proxy={origin:this._proxy});var r=n.websocketExtensions;if(r)for(var i=0,o=(r=[].concat(r)).length;i<o;i++)this.addWebsocketExtension(r[i]);for(var s in this.tls=n.tls||{},this.tls.ca=this.tls.ca||n.ca,this._alternates)this._alternates[s]=a.parse(this._alternates[s]);this.maxRequestSize=this.MAX_REQUEST_SIZE},endpointFor:function(t){return this._alternates[t]||this.endpoint},addWebsocketExtension:function(t){this.wsExtensions.push(t)},disable:function(t){this._disabled.push(t),i.disable(t)},setHeader:function(t,e){this.headers[t]=e},close:function(){var t=this._transport;delete this._transport,t&&t.close()},getConnectionTypes:function(){return i.getConnectionTypes()},selectTransport:function(t){i.get(this,t,this._disabled,function(t){this.debug("Selected ? transport for ?",t.connectionType,t.endpoint.href),t!==this._transport&&(this._transport&&this._transport.close(),this._transport=t,this.connectionType=t.connectionType)},this)},sendMessage:function(t,e,n){n=n||{};var r,i=t.id,o=n.attempts,s=n.deadline&&(new Date).getTime()+1e3*n.deadline,a=this._envelopes[i];a||(r=new this._scheduler(t,{timeout:e,interval:this.retry,attempts:o,deadline:s}),a=this._envelopes[i]={message:t,scheduler:r}),this._sendEnvelope(a)},_sendEnvelope:function(t){if(this._transport&&!t.request&&!t.timer){var e=t.message,n=t.scheduler,r=this;if(!n.isDeliverable())return n.abort(),void delete this._envelopes[e.id];t.timer=s.setTimeout(function(){r.handleError(e)},1e3*n.getTimeout()),n.send(),t.request=this._transport.sendMessage(e)}},handleResponse:function(t){var e=this._envelopes[t.id];void 0!==t.successful&&e&&(e.scheduler.succeed(),delete this._envelopes[t.id],s.clearTimeout(e.timer)),this.trigger("message",t),this._state!==this.UP&&(this._state=this.UP,this._client.trigger("transport:up"))},handleError:function(t,e){var n,r=this._envelopes[t.id],i=r&&r.request,o=this;i&&(i.then(function(t){t&&t.abort&&t.abort()}),(n=r.scheduler).fail(),s.clearTimeout(r.timer),r.request=r.timer=null,e?this._sendEnvelope(r):r.timer=s.setTimeout(function(){r.timer=null,o._sendEnvelope(r)},1e3*n.getInterval()),this._state!==this.DOWN&&(this._state=this.DOWN,this._client.trigger("transport:down")))}});o.create=function(t,e,n){return new o(t,e,n)},e(o.prototype,r),e(o.prototype,n),l.exports=o}).call(this,h(11))},function(t,e,n){"use strict";var r=n(13);r.register("websocket",n(95)),r.register("eventsource",n(97)),r.register("long-polling",n(48)),r.register("cross-origin-long-polling",n(98)),r.register("callback-polling",n(99)),t.exports=r},function(t,e,n){"use strict";(function(o){t.exports={addTimeout:function(t,e,n,r){var i;this._timeouts=this._timeouts||{},this._timeouts.hasOwnProperty(t)||((i=this)._timeouts[t]=o.setTimeout(function(){delete i._timeouts[t],n.call(r)},1e3*e))},removeTimeout:function(t){this._timeouts=this._timeouts||{};var e=this._timeouts[t];e&&(o.clearTimeout(e),delete this._timeouts[t])},removeAllTimeouts:function(){for(var t in this._timeouts=this._timeouts||{},this._timeouts)this.removeTimeout(t)}}}).call(this,n(11))},function(f,t,p){"use strict";(function(t){var e=p(10),o=p(23),s=p(47),n=p(12),r=p(27),i=p(29),a=p(8),c=p(17),u=p(96),l=p(18),h=a(e(p(13),{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:!1,isUsable:function(t,e){this.callback(function(){t.call(e,!0)}),this.errback(function(){t.call(e,!1)}),this.connect()},request:function(n){this._pending=this._pending||new s;for(var t=0,e=n.length;t<e;t++)this._pending.add(n[t]);var r=this,i=new o(function(e,t){r.callback(function(t){t&&1===t.readyState&&(t.send(c(n)),e(t))}),r.connect()});return{abort:function(){i.then(function(t){t.close()})}}},connect:function(){if(!h._unloaded&&(this._state=this._state||this.UNCONNECTED,this._state===this.UNCONNECTED)){this._state=this.CONNECTING;var n=this._createSocket();if(!n)return this.setDeferredStatus("failed");var i=this,r=!(n.onopen=function(){n.headers&&i._storeCookies(n.headers["set-cookie"]),i._socket=n,i._state=i.CONNECTED,i._everConnected=!0,i.setDeferredStatus("succeeded",n)});n.onclose=n.onerror=function(){var t,e;r||(r=!0,t=i._state===i.CONNECTED,n.onopen=n.onclose=n.onerror=n.onmessage=null,delete i._socket,i._state=i.UNCONNECTED,e=i._pending?i._pending.toArray():[],delete i._pending,t||i._everConnected?(i.setDeferredStatus("unknown"),i._handleError(e,t)):i.setDeferredStatus("failed"))},n.onmessage=function(t){var e;try{e=JSON.parse(t.data)}catch(t){}if(e){for(var n=0,r=(e=[].concat(e)).length;n<r;n++)void 0!==e[n].successful&&i._pending.remove(e[n]);i._receive(e)}}}},close:function(){this._socket&&this._socket.close()},_createSocket:function(){var t=h.getSocketUrl(this.endpoint),e=this._dispatcher.headers,n=this._dispatcher.wsExtensions,r=this._getCookies(),i=this._dispatcher.tls,o={extensions:n,headers:e,proxy:this._proxy,tls:i};""!==r&&(o.headers.Cookie=r);try{return u.create(t,[],o)}catch(t){}}}),{PROTOCOLS:{"http:":"ws:","https:":"wss:"},create:function(t,e){var n=t.transports.websocket=t.transports.websocket||{};return n[e.href]=n[e.href]||new this(t,e),n[e.href]},getSocketUrl:function(t){return(t=i(t)).protocol=this.PROTOCOLS[t.protocol],n.stringify(t)},isUsable:function(t,e,n,r){this.create(t,e).isUsable(n,r)}});a(h.prototype,l),r.Event&&void 0!==t.onbeforeunload&&r.Event.on(t,"beforeunload",function(){void 0===h._unloaded&&(h._unloaded=!0)}),f.exports=h}).call(this,p(11))},function(e,t,n){"use strict";(function(t){var r=t.MozWebSocket||t.WebSocket;e.exports={create:function(t,e,n){return"function"!=typeof r?null:new r(t)}}}).call(this,n(11))},function(u,t,l){"use strict";(function(i){var t=l(10),o=l(12),s=l(29),e=l(8),n=l(18),a=l(13),c=l(48),r=e(t(a,{initialize:function(t,e){if(a.prototype.initialize.call(this,t,e),!i.EventSource)return this.setDeferredStatus("failed");this._xhr=new c(t,e),(e=s(e)).pathname+="/"+t.clientId;var n=new i.EventSource(o.stringify(e)),r=this;n.onopen=function(){r._everConnected=!0,r.setDeferredStatus("succeeded")},n.onerror=function(){r._everConnected?r._handleError([]):(r.setDeferredStatus("failed"),n.close())},n.onmessage=function(t){var e;try{e=JSON.parse(t.data)}catch(t){}e?r._receive(e):r._handleError([])},this._socket=n},close:function(){this._socket&&(this._socket.onopen=this._socket.onerror=this._socket.onmessage=null,this._socket.close(),delete this._socket)},isUsable:function(t,e){this.callback(function(){t.call(e,!0)}),this.errback(function(){t.call(e,!1)})},encode:function(t){return this._xhr.encode(t)},request:function(t){return this._xhr.request(t)}}),{isUsable:function(e,n,r,i){if(!e.clientId)return r.call(i,!1);c.isUsable(e,n,function(t){return t?void this.create(e,n).isUsable(r,i):r.call(i,!1)},this)},create:function(t,e){var n=t.transports.eventsource=t.transports.eventsource||{},r=t.clientId,i=s(e);return i.pathname+="/"+(r||""),n[i=o.stringify(i)]=n[i]||new this(t,e),n[i]}});e(r.prototype,n),u.exports=r}).call(this,l(11))},function(i,t,s){"use strict";(function(c){var t=s(10),e=s(47),o=s(12),n=s(8),r=s(17),u=n(t(s(13),{encode:function(t){return"message="+encodeURIComponent(r(t))},request:function(e){var t,n=c.XDomainRequest?XDomainRequest:XMLHttpRequest,r=new n,i=++u._id,o=this._dispatcher.headers,s=this;if(r.open("POST",this.endpoint.href,!0),r.withCredentials=!0,r.setRequestHeader)for(t in r.setRequestHeader("Pragma","no-cache"),o)o.hasOwnProperty(t)&&r.setRequestHeader(t,o[t]);function a(){r&&(u._pending.remove(i),r.onload=r.onerror=r.ontimeout=r.onprogress=null,r=null)}return r.onload=function(){var t;try{t=JSON.parse(r.responseText)}catch(t){}a(),t?s._receive(t):s._handleError(e)},r.onerror=r.ontimeout=function(){a(),s._handleError(e)},r.onprogress=function(){},n===c.XDomainRequest&&u._pending.add({id:i,xhr:r}),r.send(this.encode(e)),r}}),{_id:0,_pending:new e,isUsable:function(t,e,n,r){if(o.isSameOrigin(e))return n.call(r,!1);if(c.XDomainRequest)return n.call(r,e.protocol===location.protocol);if(c.XMLHttpRequest){var i=new XMLHttpRequest;return n.call(r,void 0!==i.withCredentials)}return n.call(r,!1)}});i.exports=u}).call(this,s(11))},function(n,t,r){"use strict";(function(a){var t=r(10),c=r(12),u=r(29),e=r(8),l=r(17),h=e(t(r(13),{encode:function(t){var e=u(this.endpoint);return e.query.message=l(t),e.query.jsonp="__jsonp"+h._cbCount+"__",c.stringify(e)},request:function(t){var e=document.getElementsByTagName("head")[0],n=document.createElement("script"),r=h.getCallbackName(),i=u(this.endpoint),o=this;i.query.message=l(t),i.query.jsonp=r;function s(){if(!a[r])return!1;a[r]=void 0;try{delete a[r]}catch(t){}n.parentNode.removeChild(n)}return a[r]=function(t){s(),o._receive(t)},n.type="text/javascript",n.src=c.stringify(i),e.appendChild(n),n.onerror=function(){s(),o._handleError(t)},{abort:s}}}),{_cbCount:0,getCallbackName:function(){return this._cbCount+=1,"__jsonp"+this._cbCount+"__"},isUsable:function(t,e,n,r){n.call(r,!0)}});n.exports=h}).call(this,r(11))},function(t,e,n){"use strict";var r=n(10),i=n(45),o=r({initialize:function(t,e,n){this.code=t,this.params=Array.prototype.slice.call(e),this.message=n},toString:function(){return this.code+":"+this.params.join(",")+":"+this.message}});o.parse=function(t){if(t=t||"",!i.ERROR.test(t))return new o(null,[],t);var e=t.split(":"),n=parseInt(e[0]),r=e[1].split(","),t=e[2];return new o(n,r,t)};var s={versionMismatch:[300,"Version mismatch"],conntypeMismatch:[301,"Connection types not supported"],extMismatch:[302,"Extension mismatch"],badRequest:[400,"Bad request"],clientUnknown:[401,"Unknown client"],parameterMissing:[402,"Missing required parameter"],channelForbidden:[403,"Forbidden channel"],channelUnknown:[404,"Unknown channel"],channelInvalid:[405,"Invalid channel"],extUnknown:[406,"Unknown extension"],publishFailed:[407,"Failed to publish"],serverError:[500,"Internal server error"]};for(var a in s)!function(t){o[t]=function(){return new o(s[t][0],arguments,s[t][1]).toString()}}(a);t.exports=o},function(t,e,n){"use strict";var r={addExtension:function(t){this._extensions=this._extensions||[],this._extensions.push(t),t.added&&t.added(this)},removeExtension:function(t){if(this._extensions)for(var e=this._extensions.length;e--;)this._extensions[e]===t&&(this._extensions.splice(e,1),t.removed&&t.removed(this))},pipeThroughExtensions:function(r,t,i,o,s){if(this.debug("Passing through ? extensions: ?",r,t),!this._extensions)return o.call(s,t);var a=this._extensions.slice(),c=function(t){if(!t)return o.call(s,t);var e=a.shift();if(!e)return o.call(s,t);var n=e[r];if(!n)return c(t);3<=n.length?e[r](t,i,c):e[r](t,c)};c(t)}};n(8)(r,n(16)),t.exports=r},function(t,e,n){"use strict";var r=n(10),i=n(18);t.exports=r(i)},function(t,e,n){"use strict";var r=n(10),i=n(8),o=n(18),s=r({initialize:function(t,e,n,r){this._client=t,this._channels=e,this._callback=n,this._context=r,this._cancelled=!1},withChannel:function(t,e){return this._withChannel=[t,e],this},apply:function(t,e){var n=e[0];this._callback&&this._callback.call(this._context,n.data),this._withChannel&&this._withChannel[0].call(this._withChannel[1],n.channel,n.data)},cancel:function(){this._cancelled||(this._client.unsubscribe(this._channels,this),this._cancelled=!0)},unsubscribe:function(){this.cancel()}});i(s.prototype,o),t.exports=s},function(t,e,n){var r=n(105);t.exports=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(r(e).replace(/(.)/g,function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}catch(t){return r(e)}}},function(t,e){function a(t){this.message=t}(a.prototype=new Error).name="InvalidCharacterError",t.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,o=0,s="";r=e.charAt(o++);~r&&(n=i%4?64*n+r:r,i++%4)&&(s+=String.fromCharCode(255&n>>(-2*i&6))))r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return s}},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},function(r,t,e){var o=e(30),i=e(108);function s(t,e,n){return i()?r.exports=s=Reflect.construct:r.exports=s=function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&o(i,n.prototype),i},s.apply(null,arguments)}r.exports=s},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}},function(t,e,n){var r=n(112);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){(function(t){e.exports=t}).call(this,{})}],i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="dist/",i(i.s=68);function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var n,r});